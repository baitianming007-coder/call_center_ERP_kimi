{% extends "base.html" %}
{% block title %}å½’æ¡£è¯¦æƒ… - å‘¼å«ä¸­å¿ƒç®¡ç†ç³»ç»Ÿ{% endblock %}
{% block content %}
<div class="page-header">
    <h1>ğŸ“¦ {{ archive.archive_year }}å¹´åº¦å½’æ¡£è¯¦æƒ…</h1>
    <a href="{{ url_for('admin_ext.payroll_archive') }}" class="btn btn-secondary">è¿”å›åˆ—è¡¨</a>
</div>
<div class="card" style="margin-bottom: var(--space-24);">
    <div class="card-header"><h2>å¹´åº¦æ±‡æ€»</h2></div>
    <div class="card-body">
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-16);">
            <div>
                <div style="color: var(--gray-600);">æ€»äººæ•°</div>
                <div style="font-size: 24px; font-weight: bold;">{{ archive.total_employees }}äºº</div>
            </div>
            <div>
                <div style="color: var(--gray-600);">æ€»è®°å½•æ•°</div>
                <div style="font-size: 24px; font-weight: bold;">{{ archive.total_records }}æ¡</div>
            </div>
            <div>
                <div style="color: var(--gray-600);">æ€»é‡‘é¢</div>
                <div style="font-size: 24px; font-weight: bold; color: var(--color-success);">Â¥{{ "%.2f"|format(archive.total_amount) }}</div>
            </div>
            <div>
                <div style="color: var(--gray-600);">å½’æ¡£æ—¶é—´</div>
                <div style="font-size: 14px;">{{ archive.archived_at }}</div>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <div class="card-header"><h2>æœˆåº¦æ˜ç»†</h2></div>
    <div class="card-body">
        {% if monthly_summary %}
        <table class="table">
            <thead>
                <tr>
                    <th>æœˆä»½</th><th>äººæ•°</th><th>è®°å½•æ•°</th><th>é‡‘é¢</th>
                </tr>
            </thead>
            <tbody>
                {% for month in monthly_summary %}
                <tr>
                    <td>{{ month.year_month }}</td>
                    <td>{{ month.total_employees }}äºº</td>
                    <td>{{ month.total_records }}æ¡</td>
                    <td>Â¥{{ "%.2f"|format(month.total_amount) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="empty-state"><p>æ— æœˆåº¦æ•°æ®</p></div>
        {% endif %}
    </div>
</div>
{% endblock %}
