{% extends "base.html" %}

{% block title %}å‘˜å·¥ä¸šç»©æ’è¡Œæ¦œ - å‘¼å«ä¸­å¿ƒç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="mb-24">
    <h1 style="font-size: 28px; font-weight: 700; color: var(--gray-900); margin-bottom: var(--space-8);">
        ğŸ† å‘˜å·¥ä¸šç»©æ’è¡Œæ¦œ
    </h1>
    <p style="color: var(--gray-600);">{{ year_month }} Â· TOP 50 å‘˜å·¥</p>
</div>

<!-- æ’åºåˆ‡æ¢ -->
<div class="card mb-24">
    <div class="card-body">
        <div style="display: flex; gap: var(--space-12);">
            <a href="?year_month={{ year_month }}&type=orders" class="btn {% if rank_type == 'orders' %}btn-primary{% else %}btn-secondary{% endif %}">
                æŒ‰å‡ºå•æ•°
            </a>
            <a href="?year_month={{ year_month }}&type=commission" class="btn {% if rank_type == 'commission' %}btn-primary{% else %}btn-secondary{% endif %}">
                æŒ‰ææˆ
            </a>
            <a href="?year_month={{ year_month }}&type=valid_days" class="btn {% if rank_type == 'valid_days' %}btn-primary{% else %}btn-secondary{% endif %}">
                æŒ‰å‡ºå‹¤å¤©æ•°
            </a>
        </div>
    </div>
</div>

<!-- æ’è¡Œæ¦œ -->
<div class="card">
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>æ’å</th>
                    <th>å·¥å·</th>
                    <th>å§“å</th>
                    <th>å›¢é˜Ÿ</th>
                    <th>çŠ¶æ€</th>
                    <th>å·¥ä½œå¤©æ•°</th>
                    <th>æœ‰æ•ˆå·¥ä½œæ—¥</th>
                    <th>æ€»å‡ºå•</th>
                    <th>å¹³å‡å‡ºå•</th>
                    <th style="text-align: right;">æ€»ææˆ</th>
                </tr>
            </thead>
            <tbody>
                {% for emp in rankings %}
                <tr {% if emp.rank <= 3 %}style="background: rgba(16, 185, 129, 0.05);"{% endif %}>
                    <td>
                        {% if emp.rank == 1 %}
                            <span style="font-size: 24px;">ğŸ¥‡</span>
                        {% elif emp.rank == 2 %}
                            <span style="font-size: 24px;">ğŸ¥ˆ</span>
                        {% elif emp.rank == 3 %}
                            <span style="font-size: 24px;">ğŸ¥‰</span>
                        {% else %}
                            <strong>{{ emp.rank }}</strong>
                        {% endif %}
                    </td>
                    <td>{{ emp.employee_no }}</td>
                    <td><strong>{{ emp.name }}</strong></td>
                    <td>{{ emp.team }}</td>
                    <td><span class="badge badge-{{ emp.status }}">{{ emp.status | status_label }}</span></td>
                    <td>{{ emp.work_days }}</td>
                    <td>{{ emp.valid_days }}</td>
                    <td><strong style="color: var(--color-primary); font-size: 16px;">{{ emp.total_orders or 0 }}</strong></td>
                    <td>{{ emp.avg_orders }}</td>
                    <td style="text-align: right; font-weight: 700; color: var(--color-success);">
                        {{ (emp.total_commission or 0) | format_currency }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}



