# 快速启动指南 🚀

## 第一步：安装依赖

```bash
pip install -r requirements.txt
```

## 第二步：初始化数据库

```bash
python init_db.py
```

**输出示例：**
```
==================================================
呼叫中心职场管理系统 - 数据库初始化
==================================================
正在创建数据库表...
正在插入初始数据...
正在创建测试员工...
正在创建用户账号...
正在生成测试业绩数据...
正在生成状态变更历史...
✅ 数据库初始化完成！

默认账号信息：
  管理员: admin / admin123
  经理: manager / manager123
  员工: a001 / emp123 (或其他员工工号小写)

数据库文件: /Users/xxx/call center 2.0/data/callcenter.db
```

## 第三步：启动应用

```bash
python app.py
```

**输出示例：**
```
============================================================
呼叫中心职场管理系统
============================================================
访问地址: http://127.0.0.1:5000
默认账号:
  管理员: admin / admin123
  经理: manager / manager123
  员工: a001 / emp123
============================================================
 * Serving Flask app 'app'
 * Debug mode: on
 * Running on http://0.0.0.0:5000
```

## 第四步：访问系统

打开浏览器访问：**http://127.0.0.1:5000**

---

## 测试账号功能

### 1. 管理员账号（admin / admin123）

**可访问功能：**
- ✅ 主看板（全局数据）
- ✅ 员工管理（全部员工）
- ✅ 业绩管理（录入、批量录入、查询）
- ✅ 状态检查与变更
- ✅ 薪资统计
- ✅ 收入成本分析
- ✅ 团队管理
- ✅ 管理员账号管理

**测试流程：**
1. 登录后查看主看板，了解整体数据
2. 进入"员工管理"，查看所有员工
3. 点击"状态检查"，查看需要状态变更的员工
4. 进入"业绩管理" → "批量录入"，为今天录入业绩
5. 查看"薪资统计"，选择当前月份
6. 进入"团队管理"，尝试添加新团队
7. 进入"账号管理"，尝试添加新管理员

### 2. 经理账号（manager / manager123）

**可访问功能：**
- ✅ 主看板（限A组数据）
- ✅ 员工管理（仅A组员工）
- ✅ 业绩管理（仅A组）
- ✅ 状态检查与变更（仅A组）
- ✅ 薪资统计（仅A组）
- ✅ 收入成本分析（仅A组）
- ❌ 团队管理（无权限）
- ❌ 管理员账号管理（无权限）

**测试流程：**
1. 登录后注意：只能看到A组的数据
2. 尝试访问团队管理，会被拒绝
3. 录入A组员工业绩
4. 查看A组薪资统计

### 3. 员工账号（a001 / emp123）

**可访问功能：**
- ✅ 个人业绩（今日、本月、最近N天）
- ✅ 个人薪资（当月预估、历史6个月）
- ✅ 个人信息（查看、修改手机号）
- ✅ 薪资异议提交
- ❌ 所有管理端功能

**测试流程：**
1. 登录后查看"个人业绩"，看最近7天趋势图
2. 进入"个人薪资"，查看本月预估薪资
3. 点击"查看明细"，了解薪资计算依据
4. 进入"个人信息"，修改手机号
5. 尝试访问管理端页面，会被自动跳转

---

## 核心业务测试

### 测试1：日提成计算

1. 登录管理员账号
2. 进入"业绩管理" → "单条录入"
3. 选择员工，输入不同出单数：
   - 3单 → 应显示提成 ¥30.00
   - 5单 → 应显示提成 ¥70.00
   - 7单 → 应显示提成 ¥130.00

### 测试2：状态流转

1. 登录管理员账号
2. 进入"状态检查"
3. 系统会自动分析所有员工，显示需要变更的
4. 点击"应用"，状态会更新
5. 进入"员工管理"，确认状态已变更

### 测试3：薪资计算

1. 登录管理员账号
2. 进入"薪资统计"
3. 选择当前月份
4. 系统自动计算每个员工的薪资
5. 点击"查看明细"，看计算过程

### 测试4：权限隔离

1. 用经理账号登录
2. 尝试访问 `/admin/teams`
3. 应该被拒绝并提示"您没有权限"
4. 在员工管理中，只能看到A组员工

---

## 常见问题

### Q1: 启动失败，提示模块未找到

**解决：** 确保在项目根目录下运行，且已安装依赖

```bash
cd "/Users/kimi/Desktop/call center 2.0"
pip install -r requirements.txt
python app.py
```

### Q2: 数据库初始化失败

**解决：** 删除旧数据库重新初始化

```bash
rm -rf data/
python init_db.py
```

### Q3: 端口5000被占用

**解决：** 修改 `app.py` 最后一行：

```python
app.run(debug=True, host='0.0.0.0', port=5001)  # 改为5001
```

### Q4: 页面样式不显示

**解决：** 检查浏览器控制台，可能是静态文件路径问题。确保 `static/css/main.css` 文件存在。

---

## 系统架构

```
call-center-2.0/
├── app.py                  # Flask 应用主入口
├── config.py               # 配置文件
├── requirements.txt        # Python 依赖
├── init_db.py             # 数据库初始化脚本
├── schema.sql             # 数据库表结构
│
├── core/                  # 核心业务逻辑
│   ├── database.py        # 数据库连接
│   ├── auth.py            # 认证与权限
│   ├── commission.py      # 日提成计算引擎
│   ├── status_engine.py   # 状态流转引擎
│   ├── salary_engine.py   # 薪资计算引擎
│   └── utils.py           # 工具函数
│
├── routes/                # 路由模块
│   ├── auth_routes.py     # 认证路由
│   ├── employee_routes.py # 员工端路由
│   └── admin_routes.py    # 管理端路由
│
├── templates/             # Jinja2 模板
│   ├── base.html          # 基础模板
│   ├── login.html         # 登录页
│   ├── employee/          # 员工端页面
│   │   ├── performance.html
│   │   ├── salary.html
│   │   └── profile.html
│   └── admin/             # 管理端页面
│       ├── dashboard.html
│       ├── employees.html
│       ├── performance.html
│       ├── status_check.html
│       ├── salary.html
│       ├── revenue_cost.html
│       ├── teams.html
│       └── managers.html
│
├── static/                # 静态资源
│   └── css/
│       └── main.css       # 主样式表（设计Token）
│
└── data/                  # 数据目录
    └── callcenter.db      # SQLite 数据库
```

---

## 技术栈

- **后端框架**: Flask 3.0
- **数据库**: SQLite（开发）/ MySQL/PostgreSQL（生产）
- **模板引擎**: Jinja2
- **前端**: 原生 JavaScript + Chart.js
- **认证**: Session + SHA256 密码哈希
- **权限**: 基于角色的访问控制（RBAC）

---

## 下一步

✅ 系统已完整交付，包括：
- 完整的员工端功能
- 完整的管理端功能
- 严格的权限控制
- 精美的UI设计
- 完善的业务规则实现

🎯 可选扩展：
- 添加数据导出功能（Excel）
- 实现消息通知系统
- 添加数据可视化报表
- 集成第三方登录
- 实现移动端适配

💡 **祝您使用愉快！**



